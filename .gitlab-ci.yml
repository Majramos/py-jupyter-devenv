stages:
    - build

build_badges:
  rules:
    - if: '$CI_PIPELINE_SOURCE == "merge_request_event" && $CI_MERGE_REQUEST_TARGET_BRANCH_NAME == "main"'
  stage: build
  tags:
    - docker
  before_script:
    - chmod +x get-badge-info.sh
  script:
    - echo "Some script to build your code"
  after_script:
    - ./get-badge-info.sh
  artifacts:
    paths:
        - ./badges.json
    when: always
    expire_in: 1 day